# 운영체제의 큰 그림
    
## 운영체제의 심장, 커널

운영체제가 응용 프로그램에 제공하는 서비스 종류는 다양함

그 중 자원에 접근하고 조작하는 기능, 프로그램이 올바르고 안전하게 실행되게 하는 기능 이런 핵심 서비스를 담당하는 부분을 **커널** 이라고 한다.

<br><br>사용자가 컴퓨터와 상호작용 할 수 있는 통로인 **사용자 인터페이스**는 커널에 포함되지 않음


사용자 인터페이스에는 GUI와 CLI가 있다.

## 이중 모드와 시스템 호출

응용 프로그램이 직접 하드웨어에 접근하여 조작할수 있다면?

자원이 무질서하게 관리되고 응용프로그램의 실수로 컴퓨터 전체에 악영향을 끼칠 수 있다.

그래서 운영체제는 응용 프로그램이 자원에 접근할 때 자신을 통해서만 접근하도록 하여 자원을 보호한다.

이러한 운영체제의 문지기 역할은 **이중 모드로** 구현됨<br><br>

이중모드는 CPU가 명령어를 실행하는 모드를 사용자 모드와 커널 모드로 구분하는 방식.<br><br>

**사용자 모드는** 운영체제 서비스를 제공 받을 수 없는 모드. 

일반적인 응용 프그램은 기본적으로사용자 모드로 실행되며 하드웨어 자원에 접근하는 명령어를 실행할 수 없다.<br><br>

**커널 모드는** 운영체제 서비스를 제공 받을 수 있는 모드.

사용자 모드로 실행되는 프로그램이 자원에 접근하는 운여체제 서비스를 제공받으려면 운영체제에 요청을 보내 커놀 모드로 전환되어야 하는데 이러한 요청을 **시스템 호출** 이라고 한다.

시스템 호출은 일종의 소프트웨어 인터럽트이다.<br><br>

1. 하드 디스크에 데이터를 저장하는 시스템 호출 발생하여 커널 모드로 전환
2. 운영체제 내의 하드 디스크에 데이터 저장하는 코드 실행하여 접근
3. 하드 디스크 접근 끝났으면 다시 사용자 모드로 복귀하여 실행 계속

## 운영체제의 핵심 서비스

### 프로세스 관리

실행 중인 프로그램-프로세스

CPU는 일반적으로 한번에 하나의 프로세스만 실행할 수 있기에 프로세스들을 번갈아 가며 실행함.

이때 프로세스의 상태도, 사용하려는 자원도 다양하기 때문에 

운영체제는 다양한 프로세스를 관리하고 실행할수 있어야함

### 자원 접근 및 할당

프로세스는 실행을 위해 자원을 필요로 하는데 운영체제가 프로세스가 사용할 자원에 접근하여 조작함으로써 필요한 자원을 할당해줌

- **CPU**
    
    CPU는 한번에 하나의 프로세스만 실행할수 있다. 
    
    그래서 운영체제는 어떤 프로세스 부터 CPU를 이용하게 할것인지, 얼마나 오래 이용하게 할것인지 결정할수 있어야함
    
    이를 **CPU 스케줄링** 이라고 함.
    
- **메모리**
    
    프로세스에게 메모리에 어떻게 할당할지, 메모리가 부족하면 어떻게 극복 하는지
    
- **입출력장치**
    
    CPU에 하드웨어 인터럽트 요청 신호를
    보내면 CPU는 하던 일을 잠시 백업한 뒤 커널 영역에 있는 인터럽트 서비스 루틴을 실행
    
- **파일 시스템 관리**

### 요약

- 운영체제의 핵심 서비스를 제공하는 부분 = 커널
- 사용자 프로세스가 커널 서비스를 제공받기 위해서는?
    - 사용자모드에서 커널모드로 전환해야함
        - 어떻게?
            - 시스템 호출을 통해서
            - = 커널모드로 운영체제의 서비스를 제공받을수 있는 방법
            - 대표적인 커널 서비스?
                - 프로세스관리
                - 자원접근 및 할당
                - 파일 시스템관리
